/**
 * skylark-textmask - A version of textmask that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-textmask/
 * @license MIT
 */
define(["./textmask","./adjustCaretPosition","./conformToMask","./utilities","./constants"],function(e,r,o,t,n){"use strict";const a="",i="none",s="object",u="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),l="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:setTimeout;return e.createTextMaskInputElement=function(e){const d={previousConformedValue:void 0,previousPlaceholder:void 0};return{state:d,update(c,{inputElement:p,mask:v,guide:f,pipe:h,placeholderChar:m=n.placeholderChar,keepCharPositions:C=!1,showMask:P=!1}=e){if(void 0===c&&(c=p.value),c===d.previousConformedValue)return;let g,k;if(typeof v===s&&void 0!==v.pipe&&void 0!==v.mask&&(h=v.pipe,v=v.mask),v instanceof Array&&(g=t.convertMaskToPlaceholder(v,m)),!1===v)return;const T=function(e){if(t.isString(e))return e;if(t.isNumber(e))return String(e);if(void 0===e||null===e)return a;throw new Error("The 'value' provided to Text Mask needs to be a string or a number. The value "+`received was:\n\n ${JSON.stringify(e)}`)}(c),{selectionEnd:V}=p,{previousConformedValue:x,previousPlaceholder:y}=d;let w;if(typeof v===n.strFunction){if(!1===(k=v(T,{currentCaretPosition:V,previousConformedValue:x,placeholderChar:m})))return;const{maskWithoutCaretTraps:e,indexes:r}=t.processCaretTraps(k);k=e,w=r,g=t.convertMaskToPlaceholder(k,m)}else k=v;const M={previousConformedValue:x,guide:f,placeholderChar:m,pipe:h,placeholder:g,currentCaretPosition:V,keepCharPositions:C},{conformedValue:S}=o(T,k,M),b=typeof h===n.strFunction;let A={};b&&(!1===(A=h(S,Object.assign({rawValue:T},M)))?A={value:x,rejected:!0}:t.isString(A)&&(A={value:A}));const E=b?A.value:S,j=r({previousConformedValue:x,previousPlaceholder:y,conformedValue:E,placeholder:g,rawValue:T,currentCaretPosition:V,placeholderChar:m,indexesOfPipedChars:A.indexesOfPipedChars,caretTrapIndexes:w}),F=E===g&&0===j?P?g:a:E;var O,q;d.previousConformedValue=F,d.previousPlaceholder=g,p.value!==F&&(p.value=F,O=p,q=j,document.activeElement===O&&(u?l(()=>O.setSelectionRange(q,q,i),0):O.setSelectionRange(q,q,i)))}}}});
//# sourceMappingURL=sourcemaps/createTextMaskInputElement.js.map
