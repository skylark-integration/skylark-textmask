/**
 * skylark-textmask - A version of textmask that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-textmask/
 * @license MIT
 */
!function(e,t){var r=t.define,require=t.require,n="function"==typeof r&&r.amd,o=!n&&"undefined"!=typeof exports;if(!n&&!r){var s={};r=t.define=function(e,t,r){"function"==typeof r?(s[e]={factory:r,deps:t.map(function(t){return function(e,t){if("."!==e[0])return e;var r=t.split("/"),n=e.split("/");r.pop();for(var o=0;o<n.length;o++)"."!=n[o]&&(".."==n[o]?r.pop():r.push(n[o]));return r.join("/")}(t,e)}),resolved:!1,exports:null},require(e)):s[e]={factory:null,resolved:!0,exports:r}},require=t.require=function(e){if(!s.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var module=s[e];if(!module.resolved){var r=[];module.deps.forEach(function(e){r.push(require(e))}),module.exports=module.factory.apply(t,r)||null,module.resolved=!0}return module.exports}}if(!r)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,require){e("skylark-langx-ns/_attach",[],function(){return function(e,t,r){"string"==typeof t&&(t=t.split("."));for(var n=t.length,o=e,s=0,a=t[s++];s<n;)o=o[a]=o[a]||{},a=t[s++];return o[a]=r}}),e("skylark-langx-ns/ns",["./_attach"],function(e){var t={attach:function(r,n){return e(t,r,n)}};return t}),e("skylark-langx-ns/main",["./ns"],function(e){return e}),e("skylark-langx-ns",["skylark-langx-ns/main"],function(e){return e}),e("skylark-langx/skylark",["skylark-langx-ns"],function(e){return e}),e("skylark-textmask/constants",[],function(){"use strict";return{placeholderChar:"_",strFunction:"function"}}),e("skylark-textmask/utilities",["./constants"],function(e){"use strict";const t=[];function r(e){return Array.isArray&&Array.isArray(e)||e instanceof Array}const n="[]";return{convertMaskToPlaceholder:function(n=t,o=e){if(!r(n))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(-1!==n.indexOf(o))throw new Error("Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.\n\n"+`The placeholder character that was received is: ${JSON.stringify(o)}\n\n`+`The mask that was received is: ${JSON.stringify(n)}`);return n.map(e=>e instanceof RegExp?o:e).join("")},isArray:r,isString:function(e){return"string"==typeof e||e instanceof String},isNumber:function(e){return"number"==typeof e&&void 0===e.length&&!isNaN(e)},isNil:function(e){return void 0===e||null===e},processCaretTraps:function(e){const t=[];let r;for(;-1!==(r=e.indexOf(n));)t.push(r),e.splice(r,1);return{maskWithoutCaretTraps:e,indexes:t}}}}),e("skylark-textmask/conformToMask",["./utilities","./constants","./constants"],function(e,t,r){"use strict";const n=[],o="";return function(s=o,a=n,i={}){if(!e.isArray(a)){if(typeof a!==r.strFunction)throw new Error("Text-mask:conformToMask; The mask property must be an array.");a=a(s,i),a=e.processCaretTraps(a).maskWithoutCaretTraps}const{guide:l=!0,previousConformedValue:u=o,placeholderChar:c=t,placeholder:f=e.convertMaskToPlaceholder(a,c),currentCaretPosition:h,keepCharPositions:p}=i,d=!1===l&&void 0!==u,k=s.length,m=u.length,g=f.length,v=a.length,y=k-m,x=y>0,C=h+(x?-y:0),T=C+Math.abs(y);if(!0===p&&!x){let e=o;for(let t=C;t<T;t++)f[t]===c&&(e+=c);s=s.slice(0,C)+e+s.slice(C,k)}const P=s.split(o).map((e,t)=>({char:e,isNew:t>=C&&t<T}));for(let e=k-1;e>=0;e--){const{char:t}=P[e];if(t!==c){const r=e>=C&&m===v;t===f[r?e-y:e]&&P.splice(e,1)}}let w=o,b=!1;e:for(let e=0;e<g;e++){const t=f[e];if(t===c){if(P.length>0)for(;P.length>0;){const{char:t,isNew:r}=P.shift();if(t===c&&!0!==d){w+=c;continue e}if(a[e].test(t)){if(!0===p&&!1!==r&&u!==o&&!1!==l&&x){const r=P.length;let n=null;for(let e=0;e<r;e++){const t=P[e];if(t.char!==c&&!1===t.isNew)break;if(t.char===c){n=e;break}}null!==n?(w+=t,P.splice(n,1)):e--}else w+=t;continue e}b=!0}!1===d&&(w+=f.substr(e,g));break}w+=t}if(d&&!1===x){let e=null;for(let t=0;t<w.length;t++)f[t]===c&&(e=t);w=null!==e?w.substr(0,e+1):o}return{conformedValue:w,meta:{someCharsRejected:b}}}}),e("skylark-textmask/adjustCaretPosition",[],function(){"use strict";const e=[];return function({previousConformedValue:t="",previousPlaceholder:r="",currentCaretPosition:n=0,conformedValue:o,rawValue:s,placeholderChar:a,placeholder:i,indexesOfPipedChars:l=e,caretTrapIndexes:u=e}){if(0===n||!s.length)return 0;const c=s.length,f=t.length,h=i.length,p=o.length,d=c-f,k=d>0,m=0===f,g=d>1&&!k&&!m;if(g)return n;const v=k&&(t===o||o===i);let y,x,C=0;if(v)C=n-d;else{const e=o.toLowerCase(),t=s.toLowerCase(),u=t.substr(0,n).split(""),c=u.filter(t=>-1!==e.indexOf(t));x=c[c.length-1];const f=r.substr(0,c.length).split("").filter(e=>e!==a).length,h=i.substr(0,c.length).split("").filter(e=>e!==a).length,d=h!==f,m=void 0!==r[c.length-1]&&void 0!==i[c.length-2]&&r[c.length-1]!==a&&r[c.length-1]!==i[c.length-1]&&r[c.length-1]===i[c.length-2];!k&&(d||m)&&f>0&&i.indexOf(x)>-1&&void 0!==s[n]&&(y=!0,x=s[n]);const g=l.map(t=>e[t]),v=g.filter(e=>e===x).length,T=c.filter(e=>e===x).length,P=i.substr(0,i.indexOf(a)).split("").filter((e,t)=>e===x&&s[t]!==e).length,w=P+T+v+(y?1:0);let b=0;for(let t=0;t<p;t++){const r=e[t];if(C=t+1,r===x&&b++,b>=w)break}}if(k){let e=C;for(let t=C;t<=h;t++)if(i[t]===a&&(e=t),i[t]===a||-1!==u.indexOf(t)||t===h)return e}else if(y){for(let e=C-1;e>=0;e--)if(o[e]===x||-1!==u.indexOf(e)||0===e)return e}else for(let e=C;e>=0;e--)if(i[e-1]===a||-1!==u.indexOf(e)||0===e)return e}}),e("skylark-textmask/createTextMaskInputElement",["./adjustCaretPosition","./conformToMask","./utilities","./constants","./constants"],function(e,t,r,n,o){"use strict";const s="",a="none",i="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),l="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:setTimeout;return function(u){const c={previousConformedValue:void 0,previousPlaceholder:void 0};return{state:c,update(f,{inputElement:h,mask:p,guide:d,pipe:k,placeholderChar:m=n,keepCharPositions:g=!1,showMask:v=!1}=u){if(void 0===f&&(f=h.value),f===c.previousConformedValue)return;let y,x;if("object"==typeof p&&void 0!==p.pipe&&void 0!==p.mask&&(k=p.pipe,p=p.mask),p instanceof Array&&(y=r.convertMaskToPlaceholder(p,m)),!1===p)return;const C=function(e){if(r.isString(e))return e;if(r.isNumber(e))return String(e);if(void 0===e||null===e)return s;throw new Error("The 'value' provided to Text Mask needs to be a string or a number. The value "+`received was:\n\n ${JSON.stringify(e)}`)}(f),{selectionEnd:T}=h,{previousConformedValue:P,previousPlaceholder:w}=c;let b;if(typeof p===o.strFunction){if(!1===(x=p(C,{currentCaretPosition:T,previousConformedValue:P,placeholderChar:m})))return;const{maskWithoutCaretTraps:e,indexes:t}=r.processCaretTraps(x);x=e,b=t,y=r.convertMaskToPlaceholder(x,m)}else x=p;const M={previousConformedValue:P,guide:d,placeholderChar:m,pipe:k,placeholder:y,currentCaretPosition:T,keepCharPositions:g},{conformedValue:O}=t(C,x,M),V=typeof k===o.strFunction;let E={};V&&(!1===(E=k(O,Object.assign({rawValue:C},M)))?E={value:P,rejected:!0}:r.isString(E)&&(E={value:E}));const j=V?E.value:O,A=e({previousConformedValue:P,previousPlaceholder:w,conformedValue:j,placeholder:y,rawValue:C,currentCaretPosition:T,placeholderChar:m,indexesOfPipedChars:E.indexesOfPipedChars,caretTrapIndexes:b}),N=j===y&&0===A,S=v?y:s,F=N?S:j;var q,I;(c.previousConformedValue=F,c.previousPlaceholder=y,h.value!==F)&&(h.value=F,q=h,I=A,document.activeElement===q&&(i?l(()=>q.setSelectionRange(I,I,a),0):q.setSelectionRange(I,I,a)))}}}}),e("skylark-textmask/main",["skylark-langx/skylark","./conformToMask","./adjustCaretPosition","./createTextMaskInputElement"],function(e,t,r,n){"use strict";return e.attach("intg.textmask",{conformToMask:t,adjustCaretPosition:r,createTextMaskInputElement:n})}),e("skylark-textmask",["skylark-textmask/main"],function(e){return e})}(r),!n){var a=require("skylark-langx/skylark");o?module.exports=a:t.skylarkjs=a}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-textmask-all.js.map
